<% include ../partials/layout1.ejs %>

<div class="container post post-index">
    <% include ./partials/header.ejs %>

    <div class="buttons">
        <% if(isAuthenticated){ %> <!-- 1 -->
        <a class="btn btn-default" href="/posts/new">New</a>
        <% } %>
    </div>

    <table class="table table-striped posts">
        <thead>
        <tr>
            <th class="title">Title</th>
            <th class="author">Author</th> <!-- 1 -->
            <th class="date">Date</th>
        </tr>
        </thead>
        <tbody>
        <% if(posts == null || posts.length == 0){ %>
            <tr>
                <td class="noData" colspan=100> There is no data to show :(</td>
            </tr>
        <% } %>
        <% posts.forEach(function(post) { %>
            <tr>
                <td class="title">
                    <a href="/posts/<%= post._id %>">
                        <div class="ellipsis"><%= post.title %></div>
                    </a> <!-- 3 -->
                </td>
                <td class="author"> <!-- 2 -->
                    <div class="ellipsis"><%= post.author ? post.author.username : "" %></div> <!-- 3 -->
                </td>
                <td class="date">
                    <%= post.createdDate %>
                </td>
            </tr>
        <% }) %>
        </tbody>
    </table>
</div>  <!-- container end -->

<% include ../partials/layout2.ejs %>